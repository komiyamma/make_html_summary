# Htmlファイル要約・メモ化タスク要件定義

## 0. 絶対規律
途中で作業を中断したり、作業を継続するかといった確認行為を決して挟まないこと。  
以下を最後まで完遂し、完遂したらpublish する、そこまでが一連の作業である。
途中で継続するか確認を挟んでも返答が返ってくる可能性が薄く作業が無駄になる可能性が高い。
一度作業を始めたら、「最後まで完遂し、途中休憩や確認を絶対に挟まない」ことが極めて重要である。

## 1. 概要
このフォルダのdocsサブディレクトリ内の全*.htmlファイルを対象に、その内容を要約し、対応するメモファイルを生成する。
この際に「新規のスクリプトを作成(*.pyや*.js)」などは**決して作成しない**こと。
要約は、「HTMLのdescription」に使う、という前提の文面でお願いします。

## 2. 前提条件
- ファイル一覧が更新されているため、最新のディレクトリ構成を確認すること
- 対象はdocsサブディレクトリ内の*.htmlファイル全て（ただし、対応する.memoファイルが既に存在する.htmlファイルは処理対象から除外する）
- なお.html内に多数のURLリンクがある場合、そのURL先のコンテンツやURLの存在は無視してください。

## 3. 機能要件

### 3.1 ファイル検出
- docsサブディレクトリのファイル一覧を取得
- 拡張子が.htmlの全ファイルを特定 (なお、.htmlファイルは全て100％ utf8です)
- **重要:** .htmlファイルに対応する.memoファイルが既に存在する場合、その.htmlファイルは**処理対象から完全に除外する**。

### 3.2 コンテンツ抽出・要約
- 各Htmlファイルの全内容を読み込み（部分読み込み禁止）。Htmlファイルは必ず100％utf8です。ただし、対応する.memoファイルが既に存在する場合は、この読み込みはスキップされる。
- 文章内容を抽出
- 要約を作成（要約する際に、あなたは新規にスクリプトを作成したりしないこと。要約部分自体はあなたが自身の能力で行うことが品質面でも極めて重要です）
- 要約は、「HTMLのdescription」に使う、という前提の文面でお願いします。

### 3.3 出力ファイル生成
- 各Htmlファイルに対応する*.memoファイルを作成(元のHtmlファイルと同じフォルダに作る)
- ファイル名：[元ファイル名].memo（拡張子置換）

### 3.4 出力ファイル検証
- 生成された.memoファイルの長さを `check_memo_length.py` を用いて検証する。
- 検証結果が合格（65文字以上80文字未満）であれば、次のファイル処理へ進む。
- 検証結果が不合格（60文字未満、80文字以上）であれば、その.memoファイルは不適切と判断し、### 3.3 から再試行する。
- 同一ファイルへの.memo の作成処理を５回やっていずれも不合格であれば、このファイルの.memoは諦めて次のファイルへと処理を移行する。
- 
## 4. 品質要件

### 4.1 文字数制約
- **必須範囲**: 65文字以上80文字未満
- **推奨範囲**: 65文字以上75文字以下
- **絶対禁止**: 60文字未満、80文字以上
- **１文字とは 「アルファベットや英数字や記号などASCIIと言われる範囲の文字は0.5文字」としてカウント、「それ以外の文字(全角文字も含め）」は1文字としてカウント  
  (このカウントがあなたにとって自動計算が難しければカウント用のスクリプトは作成してもよい)

### 4.2 処理方式
- **本タスクを実行するAIが**各Htmlファイルの内容を深く理解し、人間が作成するような自然な要約を行うこと。
- 機械的な文字切り取りや、単なるキーワードの羅列ではない、文脈を考慮した要約を作成すること。

### 4.3 品質保証
- 要約内容の妥当性チェック必須
- 不適切な要約の場合は再作成
- 全Htmlファイルに対応するメモファイル完成まで継続

## 5. 完了条件
全ての*.htmlファイルに対応する*.memoファイルが揃っていること